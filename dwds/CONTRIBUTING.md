## Local Development

1. In the `/webdev` directory, run `pub global activate --source path webdev` (this only needs to be run once)
2. Uncomment the dwds dependency override in `/webdev/webdev/pubspec.yaml`, then run `dart run build_runner build` from `/webdev/webdev` directory
    * *Note: You will have to comment and build, and then uncomment and build, each time you need to pick up new changes*
2. From `/webdev/example`, run `webdev serve --debug --verbose` (Note: all options can be found by running `webdev help serve`)
3. Type opt/alt-d in the browser. This is required to start the VM.
4. [OPTIONAL] If you need to connect a locally running DevTools (instructions for running [here](https://github.com/flutter/devtools/blob/master/CONTRIBUTING.md )), then close the DevTools that automatically opened in the previous step. Copy and paste the debug URI (should be logged in your terminal) into the DevTools connection box.

### Note:
If you get this error:

`The /webdev/webdev/pubspec.yaml file has changed since the /webdev/webdev/pubspec.lock file was generated, please run "dart pub get" again.` 

You need to do the following:

* `rm webdev/webdev/pubspec.lock`
* Then, from `/webdev/webdev` run `dart pub get`

## Changes required when submitting a PR
* Make sure you update the `CHANGELOG.md` with a description of the change
* If DWDS / Webdev was just released, then you will need to update the version in the `CHANGELOG`, and the `pubspec.yaml` file as well (eg, https://github.com/dart-lang/webdev/pull/1462)
* For any directories you’ve touched, `run dart run build_runner` build to check in the any file that should be built. This will make sure the integration tests are run against the built files. 

## Release steps 

### Step 1: Roll DWDS into g3 
* See directions at: go/
> *NOTE: You must be a Googler to do this. If you are not, please ask someone for help.*

## Step 2: Publish DWDS to pub
* Make sure you are on the Dart stable SDK version (check with `dart --version`)
* From each of the subdirectories (`/dwds`, `/frontend_server_client`, `/frontend_server_common`, and `/webdev`) update dependencies with `dart pub upgrade`
* Update the version number in `dwds/pubspec.yaml` and `dwds/CHANGELOG.md`
* From `/dwds` run `dart run build_runner build`, this will build and update the version in `/dwds/lib/src/version.dart`
* Submit a PR with those changes (example PR: https://github.com/dart-lang/webdev/pull/1456). *Note: Ensure your PR doesn’t have any dependency overrides.*
* Once the PR is submitted, pull from master and `run dart pub publish`
* Finally, go to https://github.com/dart-lang/webdev/releases and create a new release, eg https://github.com/dart-lang/webdev/releases/tag/dwds-v12.0.0. You might need to delete some of the content of the autogenerated notes. 
> *Note: To have the right permissions for publishing, you need to be invited to the tools.dart.dev. A member of the Dart team should be able to add you at https://pub.dev/publishers/tools.dart.dev/admin.* 